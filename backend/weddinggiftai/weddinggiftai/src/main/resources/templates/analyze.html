<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>축의금 추천 테스트</title>
</head>
<body>
<h1>카카오톡 대화 분석기</h1>

<textarea id="chatText" rows="6" cols="50" placeholder="카카오톡 대화를 입력하세요..."></textarea><br><br>
<button onclick="analyzeChat()">분석하기</button>

<h3>결과</h3>
<p><strong>친밀도 점수:</strong> <span id="score">-</span></p>
<p><strong>추천 축의금:</strong> <span id="recommendation">-</span></p>

<script>
    function analyzeChat() {
      const text = document.getElementById("chatText").value;

      fetch("/api/analyze", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ text })
      })
      .then(res => res.json())
      .then(data => {
        document.getElementById("score").textContent = data.score;
        document.getElementById("recommendation").textContent = data.recommendation;
      })
      .catch(err => {
        alert("에러 발생: " + err.message);
      });
    }
</script>
</body>
</html>